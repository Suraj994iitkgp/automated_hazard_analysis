<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hazard Analyzer Chatbot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="chat-container">
        <h2>Hazard Analyzer Chatbot</h2>

        <div class="chat-box">
            {% for message in chat_history %}
                {% if message.role == "user" %}
                    <p><b>You:</b> {{ message.content }}</p>
                {% else %}
                    <div style="margin-bottom:10px;"><b>Bot:</b>
                    {% if message.content is mapping %}
                        <ul>
                        {% for key, value in message.content.items() %}
                            <li><b>{{ key }}:</b>
                                {% if value is iterable and not value is string %}
                                    {{ value|join(', ') }}
                                {% else %}
                                    {{ value }}
                                {% endif %}
                            </li>
                        {% endfor %}
                        </ul>
                    {% else %}
                        {{ message.content }}
                    {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        <form action="/chat" method="post">
            <textarea name="user_message" placeholder="Type your message..." required></textarea>
            <button type="submit">Send</button>
        </form>
    </div>
</body>
</html>
